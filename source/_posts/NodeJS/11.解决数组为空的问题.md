---
title: 11.解决数组为空的问题
tags: NodeJS
categories: NodeJS
date: 2017-11-1
---
#####在for循环中，for执行的时间是瞬间的，而在node中，执行的机制是I/O非阻塞机制，也就是说，for里面的东西还没有完全执行完，后面的代码已经开始执行了。其中这个问题在浏览器端的点击事件上也极为显著，解决的办法就是for里面要执行的代码加个括号，变为自执行函数即可。如以下的demo：
~~~bash
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
    </ul>
</body>
<script>
   var lis = document.getElementsByTagName("li");
   for(var i = 0 ; i < lis.length ; i ++) {
        (function(i){
            lis[i].onclick = function(){
                alert(i);
            }
        })(i);
   }

</script>
</html>
~~~
